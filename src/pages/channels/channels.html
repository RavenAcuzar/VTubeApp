<!--
  Generated template for the ChannelsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar no-border-bottom>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Channels</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="searchThing()"> 
      <ion-icon name="search"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
  <ion-toolbar no-border-top>
    <ion-segment [(ngModel)]="channelType" mode="md">
      <ion-segment-button value="myChannel">
        My Channel
      </ion-segment-button>
      <ion-segment-button value="allChannels">
        All Channels
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>


<ion-content>
  <div [ngSwitch]="channelType">
    <!--MY CHANNEL SECTION  -->
    <div *ngSwitchCase="'myChannel'">
      <div padding class="channelPlaceholder" [hidden]='!isLoggedOut'>
        <!-- put global boolean login variable here -->
        <img src="assets/img/VOLT-front.png" />
        <h3>"You have to log in to view your channel."</h3>
      </div>
      <div [hidden]='isLoggedOut'>
        <ion-card>
          <div class="channelMain">
            <img [src]="userChannel.cover" />
            <img [src]="userChannel.finalAvatarUrl" class="channelDetail" />
            <div class="channelViews">
              <h6>{{userChannel.views}}</h6>
              <ion-icon name="md-eye"></ion-icon>
            </div>
            <div class="channelVids">
              <h6>{{userChannel.videoCount}}</h6>
              <ion-icon name="md-videocam"></ion-icon>
            </div>
          </div>
          <ion-item class="channelLabel">
            <h2>{{userChannel.name}}</h2>
            <p>{{userChannel.followers}} Followers</p>
            <div item-end icon-only (click)='seeDesc()' class="showDescBtn">
              <ion-icon name={{descLabel}}></ion-icon>
            </div>
            <div [hidden]="!isDescriptionShown" style="margin-top:15px;">
              <h6>Description</h6>
              <p>{{userChannel.description}}</p>
            </div>
          </ion-item>
        </ion-card>
        <div padding>
          <h4>UPLOADS</h4>
          <h1 style="opacity:0.5; text-align:center; margin-top:100px;" [hidden]="hasVids">No Videos uploaded.</h1>
          <ion-card *ngFor="let vids of channelVids" [hidden]="!hasVids">
            <div class="parent" (click)="playVideo(vids.id, vids.videoPrivacy)">
              <img src="http://the-v.net{{vids.image}}" />
              <div class="duration">
                <ion-badge color="duration">{{vids.time}}</ion-badge>
              </div>
              <div class="vidpoints">
                <ion-chip color="secondary">
                  <ion-icon name="star"></ion-icon>
                  <ion-label>{{vids.points}} Points</ion-label>
                </ion-chip>
              </div>
              <div class="vidplay">
                <ion-icon name="play"></ion-icon>
              </div>
            </div>

            <ion-item>
              <ion-avatar item-start>
                <img [src]="channelDetail.channelImageFinalUrl" />
              </ion-avatar>
              <h2>
                <ion-icon name="lock" color="secondary" [hidden]="vids.noLock"></ion-icon> {{vids.title}}</h2>
              <p>{{vids.channelName}} <br> {{vids.views}} Views</p>
              <p>
                <ion-icon name="globe"></ion-icon>: {{vids.language}}</p>
              <div item-end icon-only (click)="presentPopover($event)">
                <ion-icon name="md-more"></ion-icon>
              </div>
            </ion-item>
          </ion-card>
          <ion-infinite-scroll (ionInfinite)="loadMoreChannelVids($event)">
            <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more videos...">
            </ion-infinite-scroll-content>
          </ion-infinite-scroll>
        </div>
      </div>
    </div>

    <!--ALL CHANNELS SECTION  -->
    <div padding *ngSwitchCase="'allChannels'" class="all-channels">
      <div class="divider">
        <h6>Following</h6>
        <ion-scroll scrollX="true" direction="x">
          <div class="channelBlock" (click)="goToChannelView(channel.channelId)" *ngFor="let channel of followingChannels" [hidden]="isLoggedOut">
            <img [src]="channel.finalAvatarUrl" />
            <div>
              <b>{{channel.channelName}}</b><br> {{channel.followers}} Followers
            </div>
          </div>
          <div style="text-align: center; color: rgba(213, 39, 48, 0.67); margin-top: 33px; white-space:normal;" [hidden]="!isLoggedOut">
            <h5>Please log in to view Following Channels list.</h5>
          </div>
        </ion-scroll>
      </div>
      <div class="divider">
        <h6>Recommended</h6>
        <ion-scroll scrollX="true" direction="x">
          <div class="channelBlock" (click)="goToChannelView(channel.id)" *ngFor="let channel of recommendedChannels">
            <img [src]="channel.finalAvatarUrl" />
            <div>
              <b>{{channel.title}}</b><br> {{channel.followers}} Followers
            </div>
          </div>
          <div class="channelBlockMore" (click)="loadMoreRecommended()">
            <h3>MORE</h3>
          </div>
        </ion-scroll>
      </div>
      <div class="divider">
        <h6>All Channels</h6>
        <ion-scroll scrollX="true" direction="x">
          <div class="channelBlock" (click)="goToChannelView(channel.id)" *ngFor="let channel of allChannels">
            <img [src]="channel.finalAvatarUrl" />
            <div>
              <b>{{channel.title}}</b><br> {{channel.followers}} Followers
            </div>
          </div>
          <div class="channelBlockMore" (click)="loadMoreChannel()">
            <h3>MORE</h3>
          </div>
        </ion-scroll>
      </div>
    </div>

  </div>
</ion-content>